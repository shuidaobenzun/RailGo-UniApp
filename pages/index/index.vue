<template> 	<view class="page-container"> 		<!-- 顶部导航栏 --> 		<view class="header ux-flex ux-space-between ux-align-items-center ux-padding"> 			<view class="header-empty"></view> 			<image class="logo ux-mb-small" src="/static/index-logo.png" mode="widthFix"></image> 			<navigator class="header-menu ux-border-radius" url="/pages/about/about" hover-class="ux-tap"> 				<text class="icon section-icon ux-pt-small">&#xe5d4;</text> 			</navigator> 		</view> 		<!-- 主内容区 --> 		<view class="main-content ux-padding ux-bg-grey5"> 			<!-- 诗词文案 --> 			<text class="poetry-text ux-pl-small ux-opacity-6 ux-text-small">{{ title }}</text> 			<!-- 公告栏 --> 			<view class="notice ux-border-radius-large ux-mt-small ux-shadow-sm"> 				<view class="notice-left"> 					<text class="icon ux-color-primary">&#xe0b9;</text> 					<text class="notice-text">&nbsp;公告</text> 				</view> 				<view class="notice-center"> 					<swiper vertical autoplay interval="2500" duration="300" circular> 						<swiper-item v-for="(item, index) in items" :key="index" class="notice-item ux-pl-small ux-opacity-8"> 							{{ item }} 						</swiper-item> 					</swiper> 				</view> 			</view> 			<!-- 功能卡片区 --> 			<view class="features ux-mt-small"> 				<view class="feature-row ux-flex ux-space-between"> 					<navigator class="feature-card ux-bg-white ux-border-radius-large ux-padding ux-shadow-sm" 						hover-class="feature-card-active" url="/pages/train/query"> 						<text class="icon section-icon ux-color-purple">&#xe192;</text> 						<text class="feature-title ux-text">车次</text> 						<text class="feature-desc ux-text-small ux-opacity-8">查询时刻、开行日等信息。</text> 						<view class="feature-arrow ux-text-right ux-mr-small"> 							<text class="icon">&#xe5c8;</text> 						</view> 					</navigator> 					 					<navigator class="feature-card ux-bg-white ux-border-radius-large ux-padding ux-shadow-sm" 						hover-class="feature-card-active" url="/pages/station/query"> 						<text class="icon section-icon ux-color-cyan1">&#xe88a;</text> 						<text class="feature-title ux-text">车站</text> 						<text class="feature-desc ux-text-small ux-opacity-8">查询通过车次、线路等信息。</text> 						<view class="feature-arrow ux-text-right ux-mr-small"> 							<text class="icon">&#xe5c8;</text> 						</view> 					</navigator> 				</view> 				<view class="feature-row ux-flex ux-space-between ux-mt-small"> 					<navigator class="feature-card ux-bg-white ux-border-radius-large ux-padding ux-shadow-sm" 						hover-class="feature-card-active" url="/pages/emu/query"> 						<text class="icon section-icon ux-color-orange1">&#xe570;</text> 						<text class="feature-title ux-text">动车组</text> 						<text class="feature-desc ux-text-small ux-opacity-8">查询动车组配属和运行交路。</text> 						<view class="feature-arrow ux-text-right ux-mr-small"> 							<text class="icon">&#xe5c8;</text> 						</view> 					</navigator> 					 					<view class="feature-card ux-bg-white ux-border-radius-large ux-padding ux-shadow-sm feature-disabled"> 						<text class="icon section-icon ux-color-blue">&#xe1b7;</text> 						<text class="feature-title ux-text">雷达</text> 						<text class="feature-desc ux-text-small ux-opacity-8">实时预测附近经过的列车。</text> 						<view class="feature-status ux-text-center"> 							<text class="ux-text-small ux-color-gray">施工中 请静候佳音</text> 						</view> 					</view> 				</view> 			</view> 			<!-- 底部banner --> 			<view class="banner ux-mt-small"> 				<image class="banner-img ux-border-radius-large ux-shadow-sm" 					src="/static/overlay/index_banner_1.png" 					mode="widthFix" 					style="width:100%;"></image> 			</view> 		</view> 	</view> </template> <script> async function check() { 	if (uni.getStorageSync("jqok")){ 		return 	} 	try { 		const Response = await uniGet("https://auth.railgo.zenglingkun.cn/api/check/" + uni.getStorageSync( 			'version') + "?userid=" + uni.getStorageSync('qq') + "&key=" + uni.getStorageSync('key')); 		if (Response.data.valid) { 			uni.setStorageSync("AuthTime", new Date().getTime()) 			console.log("鉴权成功") 			uni.showToast({ 				title: '鉴权成功', 				position: 'bottom', 			}) 			uni.setStorage({ 				key: 'jqok', 				data: true 			}); 		} else { 			uni.showToast({ 				title: '鉴权无效', 				position: 'bottom', 			}) 			uni.setStorageSync("oobe", false) 			uni.reLaunch({ 				url: '/pages/oobe/welcome' 			}) 		} 	} catch (error) { 		if (checkTime(uni.getStorageSync("AuthTime"), new Date().getTime())) { 			uni.showToast({ 				title: '鉴权超时，请重新鉴权', 				position: 'bottom', 			}) 			uni.setStorageSync("oobe", false) 			uni.reLaunch({ 				url: '/pages/oobe/welcome' 			}) 		} else { 			console.log("无网络但未超时") 			uni.showToast({ 				title: '离线鉴权成功', 				position: 'bottom', 			}) 		} 	} } import uniGet from "@/scripts/req.js"; import { loadDB } from "@/scripts/sqlite.js"; import { doQuery } from "@/scripts/sqlite.js"; import { KEYS_STRUCT_STATIONS, KEYS_STRUCT_TRAINS } from "@/scripts/config.js"; export default { 	data() { 		return { 			title: '海内存知己，天涯若比邻。', 			visit: 0, 			query: 0, 			items: ['暂无公告'] 		}; 	}, 	mounted() { 		this.fetchData(); 	}, 	onShow() { 		// #ifdef APP 		plus.navigator.setStatusBarBackground('#114598'); 		plus.navigator.setFullscreen(false); 		plus.navigator.showSystemNavigation(); 		// #endif 		// 鉴权 		if (uni.getStorageSync("NeedAuth")) { 			check() 		} 	}, 	methods: { 		async fetchData() { 			try { 				const titleResponse = await uniGet('https://api.state.railgo.zenglingkun.cn/yiyan'); 				this.title = titleResponse.data; 				const statsResponse = await uniGet('https://api.state.railgo.zenglingkun.cn/state'); 				this.visit = statsResponse.data.visits; 				this.query = statsResponse.data.queries; 				const noticeResponse = await uniGet("https://api.state.railgo.zenglingkun.cn/notice"); 				this.items = noticeResponse.data; 				await uniGet("https://api.state.railgo.zenglingkun.cn/visit"); 			} catch (error) { 				console.error('Error fetching data:', error); 				this.title = '海内存知己，天涯若比邻。'; 				this.visit = 0; 				this.query = 0; 				this.items = ['暂无公告']; 			} 		} 	} }; </script> <style lang="scss"> .page-container { 	background-color: #f5f5f5; 	min-height: 100vh; } .header { 	background-color: #114598; 	color: white; 	padding-top: 20rpx; 	padding-bottom: 15rpx; 	 	.header-empty { 		width: 50rpx; 	} 	 	.logo { 		width: 250rpx; 	} 	 	.header-menu { 		width: 50rpx; 		text-align: center; 		color: white; 	} } .main-content { 	padding-top: 20rpx; } .poetry-text { 	font-size: 26rpx; 	letter-spacing: 1rpx; } .notice { 	height: 80rpx; 	background: #f9f9f9; 	display: flex; 	align-items: center; 	transition: all 0.3s; 	 	&:hover { 		box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08); 	} 	 	.notice-left { 		width: 140rpx; 		display: flex; 		align-items: center; 		justify-content: center; 		 		.notice-text { 			color: #114598; 			font-weight: 600; 			font-size: 28rpx; 		} 	} 	 	.notice-center { 		flex: 1; 		height: 100%; 		 		swiper { 			height: 100%; 			 			&-item { 				height: 100%; 				font-size: 30rpx; 				color: #666; 				overflow: hidden; 				white-space: nowrap; 				text-overflow: ellipsis; 				display: flex; 				align-items: center; 			} 		} 	} } .features { 	.feature-row { 		width: 100%; 		 		.feature-card { 			flex: 1; 			min-height: 220rpx; 			box-sizing: border-box; 			position: relative; 			transition: all 0.2s ease; 			display: flex; 			flex-direction: column; 			 			&:first-child { 				margin-right: 15rpx; 			} 			 			&:last-child { 				margin-left: 15rpx; 			} 		} 		 		.feature-card-active { 			transform: translateY(-5rpx); 			box-shadow: 0 8rpx 16rpx rgba(0, 0, 0, 0.1); 		} 		 		.feature-disabled { 			opacity: 0.9; 			background-color: #fafafa; 		} 	} 	 	.section-icon { 		font-size: 50rpx; 		margin-bottom: 15rpx; 	} 	 	.feature-title { 		font-size: 32rpx; 		font-weight: 500; 		margin-bottom: 10rpx; 	} 	 	.feature-desc { 		font-size: 24rpx; 		line-height: 1.4; 		flex: 1; 	} 	 	.feature-arrow { 		font-size: 24rpx; 		color: #ccc; 	} 	 	.feature-status { 		margin-top: 10rpx; 		color: #999; 	} } .banner { 	.banner-img { 		transition: all 0.3s; 		 		&:hover { 			transform: scale(1.01); 		} 	} } // 全局样式补充 .ux-shadow-sm { 	box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05); } </style>